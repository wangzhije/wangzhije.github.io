---
title: 模块化规范
createTime: 2025/08/14 23:23:11
permalink: /frontend/javascript/jsmodule/
tags:
  - JavaScript
  - 模块化
---

## Commonjs --> Nodejs

CommonJS 是用于服务器端的规范，如 Node.js

- 因为是服务器环境，加载快，无需考虑异步加载
- 同步加载模块，<font style="color:rgb(51, 51, 51);">只有加载完成才能执行后面的操作</font>
- require/export

```javascript
// 导入
require("xxx");
require("../xxx.js");
// 导出
exports.xxxxxx = function () {};
module.exports = xxxxx;
```

## AMD --> RequireJs

AMD 是 RequireJS 在推广过程中对模块定义的规范化产出。

- 浏览器环境，需要异步加载模块
- 异步加载模块，提前执行依赖
- define/rquire

```javascript
// 定义
define("module", ["dep1", "dep2"], function(d1, d2) {...});
// 加载模块
require(["module", "../app"], function(module, app) {...});
```

## CMD -> seaJs

CMD 是 SeaJS 在推广过程中对模块定义的规范化产出

CMD 于 AMD 的区别

- CMD 是延迟执行依赖模块，AMD 是提前执行
- CMD 推崇依赖就近，按需加载；AMD 推崇依赖前置

```javascript
define(function (require, exports, module) {
  var a = require("./a");
  a.doSomething();

  var b = require("./b");
  b.doSomething();
});
```

## UMD -> UMD 是 AMD 和 CommonJS 的糅合

```javascript
(function (window, factory) {
  // 检测是不是 Nodejs 环境
  if (typeof module === "object" && typeof module.exports === "objects") {
    module.exports = factory();
  }
  // 检测是不是 AMD 规范
  else if (typeof define === "function" && define.amd) {
    define(factory);
  }
  // 使用浏览器环境
  else {
    window.eventUtil = factory();
  }
})(this, function () {
  //module ...
});
```

## ES6 Module

ES6 模块化规范出来后，大多遵循 ES6 模块化规范

```javascript
// 导出
export default {
  a: 1,
};
// 引入
import test from "./test";
// 引入并且重命名
import obj, { xxx as bbb, add } from "./test";
// 动态引入
if (true) {
  import("./test").then((res) => {});
}
```
